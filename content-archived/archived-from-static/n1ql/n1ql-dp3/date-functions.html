
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Date functions are scalar functions that determine or process date information. The following table lists the date functions. Function Description Returns DATE_PART_STR(expr, part) Date part as an ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="reference"/><meta name="DC.Title" content="Date functions"/><meta name="abstract" content="Date functions are scalar functions that determine or process date information. The following table lists the date functions."/><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Date functions are scalar functions that determine or process date information. The following table lists the date functions."/><meta name="DC.Relation" scheme="URI" content="scalar-function.html"/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="reference_oxm_btd_ln"/><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Date functions</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="couchbase.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="reference_oxm_btd_ln">
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#" title="Link to this page"/></div><div id="printlink"><a href="javascript:window.print();" title="Print this page"/></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="scalar-function.html" title="Scalar functions are functions that can be applied to N1QL expressions. These functions allow more flexible N1QL statements by performing transformations on data at runtime. Scalar functions take a single item in a result set and returns a single value. All function names are case insensitive.">Scalar functions</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="scalar-function.html" title="Scalar functions are functions that can be applied to N1QL expressions. These functions allow more flexible N1QL statements by performing transformations on data at runtime. Scalar functions take a single item in a result set and returns a single value. All function names are case insensitive."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Scalar functions</span></a></span>  </div></td></tr></tbody></table>

  <h1 class="title topictitle1">Date functions</h1>

  
  
  <div class="body refbody"><p class="shortdesc">Date functions are scalar functions that determine or process date information. The
    following table lists the date functions.</p>

    
    <table cellpadding="4" cellspacing="0" summary="" border="1" class="simpletable"><tr class="sthead">
        <th valign="bottom" align="left" id="d2213e18" class="stentry" width="34.18013856812933%">Function</th>

        <th valign="bottom" align="left" id="d2213e21" class="stentry" width="42.725173210161664%">Description</th>

        <th valign="bottom" align="left" id="d2213e24" class="stentry" width="23.094688221709006%">Returns</th>

      </tr>
<tr class="strow">
        <td valign="top" headers="d2213e18" class="stentry">DATE_PART_STR(expr, part)</td>

        <td valign="top" headers="d2213e21" class="stentry">Date part as an integer. The date expression is in ISO 8601 format and part is a
          date part string.</td>

        <td valign="top" headers="d2213e24" class="stentry">Integer</td>

      </tr>
<tr class="strow">
        <td valign="top" headers="d2213e18" class="stentry">DATE_PART_MILLIS(expr, part)</td>

        <td valign="top" headers="d2213e21" class="stentry">Date part as an integer. The date expression is in UNIX milliseconds and part is
          date part strings. For more information on date part strings, see the following section,
          DATE_PART_MILLIS date part strings.</td>

        <td valign="top" headers="d2213e24" class="stentry">Integer</td>

      </tr>
<tr class="strow">
        <td valign="top" headers="d2213e18" class="stentry">NOW_STR([ fmt ])</td>

        <td valign="top" headers="d2213e21" class="stentry">Retrieves the current date and time in ISO 8601 format.</td>

        <td valign="top" headers="d2213e24" class="stentry">Integer</td>

      </tr>
<tr class="strow">
        <td valign="top" headers="d2213e18" class="stentry">NOW_MILLIS()</td>

        <td valign="top" headers="d2213e21" class="stentry">Retrieves the current date and time in UNIX milliseconds.</td>

        <td valign="top" headers="d2213e24" class="stentry">Integer</td>

      </tr>
<tr class="strow">
        <td valign="top" headers="d2213e18" class="stentry">STR_TO_MILLIS(expr, MILLIS(expr)</td>

        <td valign="top" headers="d2213e21" class="stentry">Converts the date from ISO 8601 format to UNIX milliseconds.</td>

        <td valign="top" headers="d2213e24" class="stentry">Integer</td>

      </tr>
<tr class="strow">
        <td valign="top" headers="d2213e18" class="stentry">MILLIS_TO_STR(expr [, fmt ])</td>

        <td valign="top" headers="d2213e21" class="stentry">Converts the date from UNIX milliseconds to ISO 8601</td>

        <td valign="top" headers="d2213e24" class="stentry">Integer</td>

      </tr>
</table>
    
 
 <div class="section"><h2 class="title sectiontitle">DATE_PART_MILLIS date part strings</h2>
   
   
   <ul class="ul">
     <li class="li">millenium</li>

     <li class="li">century</li>

     <li class="li">decade - floor(year / 10)</li>

     <li class="li">year</li>

     <li class="li">quarter - 1 to 4</li>

     <li class="li">month - 1 to 12</li>

     <li class="li">day - 1 to 31</li>

     <li class="li">hour - 0 to 23</li>

     <li class="li">minute - 0 to 59</li>

     <li class="li">second - 0 to 59</li>

     <li class="li">millisecond - 0 to 999</li>

     <li class="li">week - 1 to 53</li>

     <li class="li">day_of_year, doy - 1 to 366</li>

     <li class="li">day_of_week, dow - 0 to 6</li>

     <li class="li">iso_week - 1 to 53; use with iso_year</li>

     <li class="li">iso_year - use with iso_week</li>

     <li class="li">iso_dow - 1 to 7</li>

     <li class="li">timezone - offset from UTC in seconds</li>

     <li class="li">timezone_hour - hour component of timezone offset</li>

     <li class="li">timezone_minute - minute component of timezone offset</li>

   </ul>

   
 </div>


<div class="section"><h2 class="title sectiontitle">Example</h2>
  
  <p class="p">The following query example retrieves purchase information for an e-commerce report. 
    The report lists unique customers that purchased something on the company website in the last month. 
    This information is used to identify user activity and growth.</p>

  
  <pre class="pre codeblock">
SELECT distinct count(purchases.customerId) 
    FROM purchases
    WHERE STR_TO_MILLIS(purchases.purchasedAt) 
      BETWEEN STR_TO_MILLIS("2014-02-01") and STR_TO_MILLIS("2014-03-01")       
  </pre>

  
  <p class="p">Returns:</p>

  <pre class="pre codeblock">
{
  "resultset": [
    {
      "$1": 3831
    }
  ]
}    
  </pre>



</div>

 
  </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="scalar-function.html" title="Scalar functions are functions that can be applied to N1QL expressions. These functions allow more flexible N1QL statements by performing transformations on data at runtime. Scalar functions take a single item in a result set and returns a single value. All function names are case insensitive."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Scalar functions</span></a></span>  </div>
</body>
</html>